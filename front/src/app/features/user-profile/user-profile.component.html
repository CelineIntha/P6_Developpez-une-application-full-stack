<app-navbar></app-navbar>

<div class="container mt-4">
  <h1 class="text-center py-4 fw-bold fs-2">Profil utilisateur</h1>

  @if (errorMessage) {
    <div class="row d-flex justify-content-center align-items-center">
      <div class="col-10 col-lg-4 alert alert-danger text-center mb-5">{{ errorMessage }}</div>
    </div>
  }

  @if (profileForm) {
    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="border-bottom border-black pb-5">
      <div class="container d-flex flex-column align-items-center gap-3">

        <mat-form-field appearance="outline" class="w-100 w-lg-75 w-xl-50">
          <mat-label>Nom d'utilisateur</mat-label>
          <input matInput formControlName="username"/>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100 w-lg-75 w-xl-50">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email"/>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100 w-lg-75 w-xl-50">
          <mat-label>Mot de passe</mat-label>
          <input matInput type="password" formControlName="password"/>
          @if (profileForm.get('password')?.touched && profileForm.get('password')?.invalid) {
            <mat-error>
              Le mot de passe doit contenir au moins 8 caractères, dont une majuscule, une minuscule, un chiffre et un
              caractère spécial.
            </mat-error>
          }
        </mat-form-field>

        <div class="pt-2 text-center">
          <button class="btn border btn-save text-white fw-bold w-100" type="submit" [disabled]="profileForm.invalid">
            Sauvegarder
          </button>
        </div>

      </div>
    </form>

  }
</div>
